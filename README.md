# libkrb5

This repository contains both work-in-progress safe, idiomatic rust bindings for
`libkrb5`, the client library of [MIT Kerberos 5][krb5], and the underlying
"unsafe" bindings generated by `bindgen` in `libkrb5-sys`.

## Thread-safety

Bear in mind that `libkrb5` is not entirely thread-safe, according to its
documentation.

For this reason, a Kerberos context can only be created once globally with this
crate, and since that context does not implement `Send` or `Sync`, this only
allows access to the `libkrb5` library on a single thread.

This also means that tests must be executed with
`cargo test -- --test-threads 1` to pass, otherwise they must fail.

In the future, this might be changed to a global context that's shared between
threads, if I can make this work safely.

## Dependencies

The `libkrb5-sys` bindings link against the system installation of `libkrb5`.
The build script uses `pkg-config` to probe for the presence of the dependency
and uses it to determine the required linker flags.

[krb5]: https://web.mit.edu/kerberos/

